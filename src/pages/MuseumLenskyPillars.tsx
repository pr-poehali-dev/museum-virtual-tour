import { useState } from "react";
import { useNavigate } from "react-router-dom";
import { Card, CardContent } from "@/components/ui/card";
import { Button } from "@/components/ui/button";
import Icon from "@/components/ui/icon";
import AudioPlayer from "@/components/AudioPlayer";

const MuseumLenskyPillars = () => {
  const navigate = useNavigate();
  const [currentLocation, setCurrentLocation] = useState(0);
  const [isPlaying, setIsPlaying] = useState(false);

  const locations = [
    {
      id: 1,
      title: "Столб Дед",
      type: "Скальное образование",
      height: "104 метра",
      description:
        "Самый высокий и величественный столб комплекса, возвышающийся на 104 метра над уровнем реки Лены. Столб Дед получил своё название благодаря мощной форме, напоминающей фигуру мудрого старца, который веками наблюдает за течением великой сибирской реки. Это кембрийское скальное образование сформировалось около 540-500 миллионов лет назад из морских отложений. В те далёкие времена здесь плескались воды древнего океана, а на его дне накапливались слои известняка и доломита. Столб представляет собой уникальный геологический памятник, в котором можно проследить историю развития жизни на Земле. В его породах найдены окаменелости древних морских организмов — трилобитов, брахиопод и строматолитов. Для коренных народов Якутии столб является священным местом, где по преданиям обитают духи предков.",
      image:
        "https://cdn.poehali.dev/files/ce08fe40-8e39-401f-bff3-4c537329999e.jpg",
      audioText:
        "Добро пожаловать к величественному Столбу Дед — самому высокому и почитаемому из всех Ленских столбов. Представьте себе: 540 миллионов лет назад здесь простирался бескрайний древний океан. На его дне медленно накапливались слои морских отложений — останки микроорганизмов, раковины древних моллюсков, кораллы. Тысячелетие за тысячелетием эти отложения уплотнялись, превращаясь в прочные известняковые породы. Затем произошло чудо — тектонические силы подняли морское дно, и древние океанские отложения оказались высоко над землёй. Ветер, дождь, морозы и оттепели миллионы лет трудились скульпторами, вырезая из монолитной скалы эти удивительные башни. Якутские шаманы считали столб домом могущественных духов. По их верованиям, здесь живёт дух-хранитель всей долины реки Лены. Современные учёные находят в породах столба окаменелости трилобитов — древних морских членистоногих, живших здесь сотни миллионов лет назад. Каждый слой камня — это страница в книге истории нашей планеты.",
      duration: "5:30",
    },
    {
      id: 2,
      title: "Устье реки Буотама",
      type: "Природный комплекс",
      height: "Долина",
      description:
        "Устье реки Буотама — это место особой силы и красоты, где воды одного из крупнейших притоков Лены сливаются с великой сибирской рекой. Отсюда открывается панорамный вид на весь комплекс Ленских столбов во всём их величии. Река Буотама берёт начало в горах Верхоянского хребта и несёт свои воды через 418 километров таёжных просторов Якутии. В месте слияния образуется широкая пойма с множеством островков и проток, которые весной превращаются в настоящий лабиринт из воды и зелени. Эта территория является важнейшим местом гнездования водоплавающих птиц — здесь можно встретить лебедей, гусей, уток более 20 видов. Археологические находки свидетельствуют о том, что люди жили в этих местах уже 3000 лет назад. Древние племена рыбаков и охотников считали устье священным местом, где река-мать Лена принимает дары от своего сына Буотама. По якутским легендам, именно здесь великий шаман Эллэй получил от духов воды дар предвидения будущего.",
      image:
        "https://cdn.poehali.dev/files/60820555-2f3c-4452-a0e0-8c2b751ecc0e.jpg",
      audioText:
        "Перед вами открывается одно из самых священных мест Якутии — устье реки Буотама. Здесь, где воды притока встречаются с великой Леной, происходит удивительное природное действо. Буотама — это не просто река, это артерия жизни, которая 418 километров несёт через тайгу талые воды Верхоянских гор. Представьте, как тысячи лет назад по этим водам плыли долблёные лодки древних рыбаков. Они знали каждый изгиб реки, каждую отмель и глубину. Весной, когда тает снег, уровень воды поднимается на несколько метров, и пойма превращается в огромное зеркало, отражающее небо и столбы. В это время сюда прилетают тысячи перелётных птиц — лебеди-кликуны, серые гуси, различные виды уток. Их голоса сливаются в удивительную симфонию северной природы. Коренные жители верили, что в водах слияния живёт дух Буотама — покровитель рыбаков и путешественников. Шаманы приходили сюда за силой и мудростью, а молодые охотники — за благословением на удачную охоту. Современные исследования показали, что здесь действительно особый микроклимат — температура воды и воздуха отличается от окружающих территорий на несколько градусов.",
      duration: "4:15",
    },
    {
      id: 3,
      title: "Тукуланы",
      type: "Песчаные дюны",
      height: "До 30 метров",
      description:
        "Тукуланы — это уникальный природный феномен, песчаные дюны посреди северной тайги в условиях вечной мерзлоты. Название происходит от якутского слова 'туку' — песок. Эти северные пустыни занимают площадь около 30 квадратных километров и представляют собой настоящую загадку для учёных. Песчаные массивы достигают высоты 30-40 метров и постоянно меняют свою форму под воздействием ветров. Образовались тукуланы в результате выветривания древних песчаников юрского периода, а также благодаря деятельности реки Лены, которая на протяжении тысячелетий намывала песок на берега. Особенность этих дюн в том, что они существуют в зоне вечной мерзлоты при среднегодовой температуре -8°C. Летом поверхность песка может нагреваться до +60°C, создавая удивительный контраст с окружающей тайгой. Здесь произрастают уникальные растения-псаммофиты, приспособленные к жизни на песке, а также обитают редкие виды насекомых и пресмыкающихся. В песчаных дюнах археологи находят следы древних стоянок охотников и рыболовов возрастом до 10 тысяч лет.",
      image:
        "https://cdn.poehali.dev/files/6ec562de-771d-428c-8bc6-379540ebf4ef.jpg",
      audioText:
        "Добро пожаловать в удивительный мир северных пустынь — тукуланы Ленских столбов. То, что вы видите перед собой, кажется невозможным — настоящая песчаная пустыня в сердце сибирской тайги, где среднегодовая температура составляет минус восемь градусов. Как же возникло это чудо природы? Миллионы лет назад здесь простирались древние моря юрского периода. Когда они отступили, остались мощные слои песчаников. Ветер, вода и время разрушали эти породы, превращая их в мелкий песок. Река Лена веками намывала этот песок, создавая всё новые и новые дюны. Но самое удивительное — эти пески живут своей жизнью. Дюны постоянно движутся, меняют форму, некоторые за год могут сместиться на несколько метров. Летом поверхность песка раскаляется до шестидесяти градусов — можно даже поджарить яичницу! А зимой те же дюны покрываются снегом и промерзают на глубину нескольких метров. Здесь растут удивительные растения — песчаная осока, полынь, мятлик. Они приспособились к жизни в постоянно движущемся песке, их корни могут достигать глубины пяти метров. В тукуланах живут редкие ящерицы — живородящие ящерицы, которые больше нигде в Якутии не встречаются. А ещё здесь находят артефакты древних охотников — каменные наконечники стрел, скребки, даже остатки очагов возрастом десять тысяч лет.",
      duration: "4:45",
    },
  ];

  const toggleAudio = () => {
    setIsPlaying(!isPlaying);
  };

  const nextLocation = () => {
    setCurrentLocation((prev) => (prev + 1) % locations.length);
    setIsPlaying(false);
  };

  const prevLocation = () => {
    setCurrentLocation(
      (prev) => (prev - 1 + locations.length) % locations.length,
    );
    setIsPlaying(false);
  };

  const current = locations[currentLocation];

  return (
    <div className="min-h-screen bg-gradient-to-br from-emerald-50 to-teal-50">
      {/* Header */}
      <header className="bg-white/80 backdrop-blur-sm border-b sticky top-0 z-10">
        <div className="container mx-auto px-4 py-4 flex items-center justify-between">
          <Button
            onClick={() => navigate("/")}
            variant="ghost"
            className="flex items-center gap-2"
          >
            <Icon name="ArrowLeft" size={20} />
            Назад к музеям
          </Button>
          <h1 className="text-xl font-bold text-gray-800">Ленские столбы</h1>
          <div className="text-sm text-gray-600">
            {currentLocation + 1} из {locations.length}
          </div>
        </div>
      </header>

      <div className="container mx-auto px-4 py-8">
        <div className="max-w-6xl mx-auto">
          <div className="grid lg:grid-cols-2 gap-8 items-start">
            {/* Image Section */}
            <div className="relative">
              <Card className="overflow-hidden border-0 shadow-2xl">
                <img
                  src={current.image}
                  alt={current.title}
                  className="w-full h-[500px] object-cover"
                />
              </Card>

              {/* Navigation Controls */}
              <div className="absolute top-4 left-4 right-4 flex justify-between">
                <Button
                  onClick={prevLocation}
                  size="sm"
                  className="bg-white/90 text-gray-700 hover:bg-white"
                >
                  <Icon name="ChevronLeft" size={20} />
                </Button>
                <Button
                  onClick={nextLocation}
                  size="sm"
                  className="bg-white/90 text-gray-700 hover:bg-white"
                >
                  <Icon name="ChevronRight" size={20} />
                </Button>
              </div>
            </div>

            {/* Content Section */}
            <div className="space-y-6">
              <div>
                <h2 className="text-3xl font-bold text-gray-800 mb-2">
                  {current.title}
                </h2>
                <p className="text-lg text-emerald-600 font-medium">
                  {current.type} • {current.height}
                </p>
              </div>

              <p className="text-gray-700 leading-relaxed text-lg">
                {current.description}
              </p>

              <AudioPlayer
                title="Аудио-рассказ"
                duration={current.duration}
                audioText={current.audioText}
                className="bg-gradient-to-r from-emerald-100 to-teal-100 border-emerald-200"
              />
            </div>
          </div>
        </div>
      </div>

      {/* Location Navigation */}
      <div className="container mx-auto px-4 pb-8">
        <div className="max-w-6xl mx-auto">
          <div className="grid grid-cols-3 gap-3">
            {locations.map((location, index) => (
              <button
                key={location.id}
                onClick={() => setCurrentLocation(index)}
                className={`p-2 rounded-lg border transition-all ${
                  index === currentLocation
                    ? "border-emerald-600 bg-emerald-50"
                    : "border-gray-200 hover:border-emerald-300"
                }`}
              >
                <img
                  src={location.image}
                  alt={location.title}
                  className="w-full h-16 object-cover rounded"
                />
                <p className="text-xs text-gray-600 mt-1 truncate">
                  {location.title}
                </p>
              </button>
            ))}
          </div>
        </div>
      </div>
    </div>
  );
};

export default MuseumLenskyPillars;
